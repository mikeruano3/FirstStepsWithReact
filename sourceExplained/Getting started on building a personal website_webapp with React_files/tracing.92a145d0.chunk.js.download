(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{"./src/util/tracing.ts":function(e,n,t){"use strict";t.r(n),t.d(n,"init",(function(){return a})),t.d(n,"extractSpan",(function(){return u})),t.d(n,"instrumentAppPerformance",(function(){return l}));var r=t("./node_modules/lightstep-tracer/browser.js"),o=t("./node_modules/opentracing/lib/index.js"),i=t("./src/store/actions/debug.ts"),s=t("./src/store/selectors/session.ts"),c=t("./src/util/performance.ts"),a=function(e){var n=e.name,t=e.host,i=e.token,s=e.appVersion,c=new r.Tracer({component_name:n,xhr_instrumentation:!1,access_token:i,collector_host:t,default_span_tags:{"component.version":s}});return Object(o.initGlobalTracer)(c),c},u=function(e,n){if(n)return e.extract(o.FORMAT_TEXT_MAP,n)},l=function(e,n,t,r,a,u,l){var f=l?l.metricName:"unidentified",d={"user.logged_in":Object(s.a)(a),"req.route_name":f,"req.route":f};u.forEach((function(e){return d["req.".concat(e)]=1}));var p={loggedIn:Object(s.a)(a),route:f,withinSsrRecircPerfExperiment:u.includes("ssr_recirc_perf_tag"),withinPostInternalLinksExperiment:u.includes("post_internal_links")},g=function(e){return Math.round(1e3*e)},m=function(n,t,r,o){var i=r.start,s=r.end,c=e.startSpan("timing.".concat(t),{childOf:n,tags:d}).setBeginMicros(g(i)).setEndMicros(g(s));return null!=o&&o(c),c.finish(),c};c.d.observe((function(s){r.reportRender(p,s);var c=e.startSpan("timing.navigation",{references:[Object(o.followsFrom)(n)],tags:d}).setBeginMicros(g(s.load.start)).setEndMicros(g(s.load.end));m(c,"beforeDomainLookup",s.beforeDomainLookup),m(c,"domainLookup",s.domainLookup),m(c,"connect",s.connect),m(c,"request",s.request),m(c,"response",s.response),m(c,"processing",s.processing);var a=s.overallFCP,u=s.client,l=s.render,f=s.overallLCP;null!=a&&m(c,"firstContentfulPaint",a),null!=u&&m(c,"client",u,(function(e){null!=l&&m(e,"render",l)})),null!=f&&m(c,"largestContentfulPaint",f),c.finish(),t(Object(i.c)(c.generateTraceURL()))})),c.b.observe((function(t){r.reportInput(p,t),e.startSpan("timing.input.first.delay",{references:[Object(o.followsFrom)(n)],tags:d}).setBeginMicros(g(t.first.start)).setEndMicros(g(t.first.end)).finish()}))}}}]);
//# sourceMappingURL=tracing.92a145d0.chunk.js.map